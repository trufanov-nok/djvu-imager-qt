<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>C44</TITLE>
<style type="text/css">
<!--
  OL,UL,P,BODY,TD,TR,TH,FORM { 
    font-family: verdana,arial,helvetica,sans-serif; font-size:small; 
    color: #000000; }
  H1 { font-size: x-large; font-family: verdana,arial,helvetica,sans-serif; }
  H2 { font-size: large; font-family: verdana,arial,helvetica,sans-serif; }
  H3 { font-size: medium; font-family: verdana,arial,helvetica,sans-serif; }
  H4 { font-size: small; font-family: verdana,arial,helvetica,sans-serif; }
  H5 { font-size: x-small; font-family: verdana,arial,helvetica,sans-serif; }
  H6 { font-size: xx-small; font-family: verdana,arial,helvetica,sans-serif; }
--></style>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<table width=100% bgcolor="#C0C0E0" border=0 cellspacing=0 cellpadding=0>
<tr><td valign=middle align=center><h1>C44</h1></td></tr>
</table>
<p>
<div style="margin-left: 2cm">
Section: DjVuLibre-3.5 (1)<BR>Updated: 10/11/2001<BR><A HREF="#index">Index</A>
<A HREF="index.html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

c44 - DjVuPhoto encode.
<P>
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<B>c44 [</B><I>options</I><B>] </B><I>inputfilename</I><B> [</B><I>outputfilename</I><B>]</B>

<P>
<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

Produces a DjVuPhoto encoded image.
The input image file 
<I>inputfilename</I>

can be either a portable gray-map (
<FONT SIZE="-1">PGM</FONT>
) or a portable pix-map (<FONT SIZE="-1">PPM</FONT>
).
Input images compressed with
<FONT SIZE="-1">JPEG</FONT>
are also accepted. It is however suggested to only use 
high quality 
<FONT SIZE="-1">JPEG</FONT>
files ( low compression ratio, large size )
because the wavelet compression will increase the defects
already present in highly compressed
<FONT SIZE="-1">JPEG</FONT>
files.
<P>
The program produces a DjVuPhoto file
<I>outputfilename</I>.

If the output file name is not specified,
a default file name will be generated by replacing
the input file name suffix by suffix 
<I>djvu</I>.

<P>
The main design objective for the DjVu wavelets consisted of allowing
progressive rendering and smooth scrolling of large images with limited memory
requirements.  Decoding functions process the compressed data and update a
memory efficient representation of the wavelet coefficients.  Imaging function
then can quickly render an arbitrary segment of the image using the available
data.  Both process can be carried out in two threads of execution.  This
design plays an important role in the DjVu system.  We investigated various
state-of-the-art wavelet compression schemes.  Although these schemes may
achieve slightly smaller file sizes, the decoding functions did not even
approach our requirements.  The
<FONT SIZE="-1">IW44</FONT>
wavelets reach these requirements today and may in the future implement more
modern refinements if these refinements can be implemented within our
constraints.
<P>
<A NAME="lbAE">&nbsp;</A>
<H2>QUALITY SELECTION OPTIONS</H2>

<P>
DjVuPhoto files are logically composed of a sequence of &quot;slices&quot; containing
successive image refinements.  Slices are grouped in &quot;chunks&quot; defining the
progressive rendering sequence.  The viewer is able to display an intermediate
image after processing each chunk.  A typical DjVuPhoto files contains 80 to
120 slices grouped into 1 to 4 chunks.
<P>
The quality selection options provide various ways to specify the number of
chunks and the number of slices per chunk.  The 
<B>c44</B>

program adds slices to the current chunk until exceeding a target
number of slices, a target file size, or a target quality specification.
The following options define targets for each chunk.  The option 
argument contain several numerical values (one per chunk) separated
by either commas or pluses.
<P>
<DL COMPACT>
<DT><B>-slice </B><I>n</I><B>+...+</B><I>n</I>

<DD>
Specify the number of slices in each chunk.
The option argument contains plus-separated numerical values (one per chunk)
indicating the number of slices per chunk.  Option 
<B>-slice 74+13+10</B>,

for instance, would be appropriate for compressing a photographic image
with three progressive refinements.  More quality and more refinements
can be obtained with option
<B>-slice 72+11+10+10</B>.

<DT><B>-slice </B><I>n</I><B>,...,</B><I>n</I>

<DD>
Specify the cumulative number of slices for each chunk.
Since the final quality is determined by the total number of slices,
it is often more convenient to use comma-separated values (one per chunk)
indicating the cumulative number of slices for each chunk (i.e. including
those encoded in all previous chunks).  The values suggested above
can also be expressed as
<B>-slice 74,87,97</B>

and
<B>-slice 72,83,93,103.</B>

<DT><B>-size </B><I>n</I><B>,...,</B><I>n</I>

<DD>
Specify size targets for each chunk expressed in bytes.
The option argument can be either a plus-separated list specifying a size
for each chunk, or a comma separated list specifying cumulative sizes
for each chunk and all previous chunks.  Size targets are approximates.
Slices will be added to each chunk until exceeding the specified target.
<DT><B>-bpp </B><I>n</I><B>,...,</B><I>n</I>

<DD>
Specify size targets for each chunk expressed in bits-per-pixel.
Both comma-separated and plus-separated specifications are accepted.
Option 
<B>-bpp 0.25,0.5,1</B>

usually provides good results.
<DT><B>-percent </B><I>n</I><B>,...,</B><I>n</I>

<DD>
Specify size targets for each chunk expressed as a percentage of the
input file size.  Both comma-separated and plus-separated specifications
are accepted.  Results can be drastically different according to the
format of the input image (raw or 
<FONT SIZE="-1">JPEG</FONT>
compressed).
<DT><B>-decibel </B><I>n</I><B>,...,</B><I>n</I>

<DD>
Specify quality targets for each chunk expressed as a comma-separated list of
increasing decibel values.  Decibel values range from 16 (very low quality) to
48 (very high quality).  This criterion should not be relied upon when
re-encoding an image previously compressed by another compression scheme.
Selecting this option significantly increases the compression time.
<DT><B>-dbfrac </B><I>frac</I>

<DD>
Indicate that the decibel values specified in option
<B>-quality</B>

should be computed by averaging the mean squared errors of only the fraction
<I>frac</I>

of the most mis-represented blocks of 32 x 32 pixels.  This option is useful
with composite images containing solid color features (e.g. an image with a
large white border).
</DL>
<P>

Providing no quality specification options automatically selects a default
quality specification
<B>-slice 74,89,99</B>.

Multiple quality specification options are allowed.  The program outputs a
file whose total number of chunks is the largest number of chunks of all
quality specifications.  Slices are added to each chunk until reaching any of
the quality target for this chunk.
<P>
<A NAME="lbAF">&nbsp;</A>
<H2>OTHER OPTIONS</H2>

The following additional options are supported:
<DL COMPACT>
<DT><B>-dpi </B><I>n</I>

<DD>
Specify the resolution information encoded into the output file expressed in
dots per inch. The resolution information encoded in DjVu files determine how
the decoder scales the image on a particular display.  Meaningful resolutions
range from 25 to 1200.  The default value, 100 dpi, should be suitable for
most photographic images.
<DT><B>-gamma </B><I>n</I>

<DD>
Specify the gamma correction information encoded into the output file.
The argument 
<I>n</I>

specified the gamma value of the device for which the input image was
designed. The default value is 2.2.  This is appropriate for images 
designed for a standard computer monitor.
<DT><B>-mask </B><I>pbmfilename</I>

<DD>
The design of the 
<FONT SIZE="-1">IW44</FONT>
wavelets allows for compressing partially masked images.
This option can be used when certain pixels of a background
image are going to be covered by foreground objects like text or drawings.
File 
<I>pbmfile </I>

must be a 
<FONT SIZE="-1">PBM </FONT>
file whose size matches the size of the input file.  
Each black pixel in 
<I>pbmfile </I>

means that the value of the corresponding pixel in the input file is
irrelevant.  The 
<FONT SIZE="-1">IW44</FONT>
encoder will replace the masked pixels by a color value whose coding 
cost is minimal (see 
<B><A HREF="http://www.djvuzone.org/djvu/techpapers/mask/index.djvu">http://www.djvuzone.org/djvu/techpapers/mask/index.djvu</A></B>

for technical details.)
<DT><B>-crcbnormal </B>

<DD>
Select normal chrominance encoding. 
Chrominance information is encoded at the same resolution as the luminance.
This is the default.
<DT><B>-crcbhalf </B>

<DD>
Selects half resolution chrominance encoding.  Chrominance information is
encoded at half the luminance resolution.
<DT><B>-crcbdelay </B><I>n</I>

<DD>
This option can be used with 
<B>-crcbnormal</B>

and
<B>-crcbhalf</B>

to modify the quality of the chrominance information.
The option arguments specifies a parameter
<I>n</I>,

expressed in slices, that reduces the bit-rate associated with
the chrominance.  The default chrominance encoding delay is 
10 slices.
<DT><B>-crcbfull </B>

<DD>
Select the highest possible quality for encoding the chrominance information. This
is equivalent to specifying 
<B>-crcbnormal</B> and <B>-crcbdelay 0</B>.

<DT><B>-crcbnone </B>

<DD>
Disable the encoding of the chrominance.  Only the luminance information will
be encoded. The resulting image will show in shades of gray.
</DL>
<P>

<P>
<A NAME="lbAG">&nbsp;</A>
<H2>REMARKS</H2>

The default quality setting of the DjVuLibre version of
<B>c44</B>

has been increased.  
It produces larger files with a better quality.  
Quality can be lowered using the quality selection options!.
<P>
<A NAME="lbAH">&nbsp;</A>
<H2>BUGS</H2>

The encoder requires more memory than necessary.
<BR>

The rechunking capability is currently broken.
<P>
<A NAME="lbAI">&nbsp;</A>
<H2>CREDITS</H2>

This program was written by L'eon Bottou &lt;<A HREF="mailto:leonb@users.sourceforge.net">leonb@users.sourceforge.net</A>&gt; and
was then improved by Andrei Erofeev &lt;<A HREF="mailto:andrew_erofeev@yahoo.com">andrew_erofeev@yahoo.com</A>&gt;, Bill Riemers
&lt;<A HREF="mailto:docbill@sourceforge.net">docbill@sourceforge.net</A>&gt; and many others.
<P>
<P>
<A NAME="lbAJ">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="djvu.html">djvu</A></B>(1),

<B><A HREF="man:pnm">pnm</A></B>(5),

<B><A HREF="man:cjpeg">cjpeg</A></B>(1)

<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">QUALITY SELECTION OPTIONS</A><DD>
<DT><A HREF="#lbAF">OTHER OPTIONS</A><DD>
<DT><A HREF="#lbAG">REMARKS</A><DD>
<DT><A HREF="#lbAH">BUGS</A><DD>
<DT><A HREF="#lbAI">CREDITS</A><DD>
<DT><A HREF="#lbAJ">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="../index.html">man2html</A>,
using the manual pages.<BR>
<<<<<<< c44.html
Time: 20:25:28 GMT, August 21, 2004
=======
Time: 00:49:53 GMT, July 12, 2005
>>>>>>> 1.18


</div>
<p>
<table width=100% bgcolor="#C0C0E0" border=0 cellspacing=0 cellpadding=3>
<tr><td valign=middle align=center><h1>C44</h1></td></tr>
</table>
</BODY>
</HTML>
